# 쿠버네티스와 마이크로서비스
- 데브옵스의 실현, 마이크로서비스
  - 데브옵스는 개발 조직과 운영 조직이 물리적으로 격리되지 않는 환경에서 개발, 테스트, 배포, 운영에 이르는 전체 생명주기를 서로 긴밀하게 통합하여 관리 
  - 데브옵스를 실현하기 위한 수단으로 필연적으로 마이크로서비스가 등장
  - 마이크로서비스는 전통적인 거대한 덩치의 애플리케이션을 잘게 쪼개는 것, 서비스의 집합으로서의 애플리케이션 
  - 데브옵스 워크플로우
    - 소프트웨어의 개발과 운영의 합성어로서 소프트웨어 개발자와 정보기술 전문가 간의 소통, 협업 및 통합을 강조하는 개발 환경이나 문화
- 마이크로서비스 아키텍처에 대한 정의
  - 소프트웨어 애플리케이션을 독립적으로 배치 가능한 서비스 조합(suite)으로 설계하는 방식
  - 마이크로서비스 아키텍처는 아주 작은 단위로 동작하는 서비스가 구동되도록 시스템 및 소프트웨어의 구성과 구성요소 간의 관계를 정의한 아키텍처
  - 모든 요소를 하나의 애플리케이션에 구축하는 전통적인 모놀로식 접근 방식 대신 마이크로서비스에서는 모든 요소가 독립적이며 연동되어 동일한 태스크를 완수 
  - 하나의 애플리케이션을 구성함에 있어 분할된 다수의 서버 또는 컨테이너를 통해 애플리케이션 기능뿐만 아니라 데이터까지 분리하여 격리된 독립된 환경으로 구성되는 점이 특징 
- 마이크로서비스 특징
  - 애플리케이션 로직을 각자 책임이 명확한 작은 컴포넌트들로 분해하고 이들을 조합해서 솔루션을 제공
  - 각 컴포넌트는 작은 책임 영역을 담당하고 완전히 상호 독립적으로 배포 
  - 마이크로서비스는 몇가지 기본 원칙에 기반을 두며, 서비스 소비자와 서비스 제공자 사이의 데이터 교환을 위해 HTTP와 JSON같은 경량 통신 프로토콜을 사용 
- 가상화와 컨테이너
  - 전통적인 배포 : 물리서버 기반 애플리케이션 실행
  - 가상화된 배포 : 단일 물리 서버의 CPU에서 여러 가상 시스템(VM)실행
  - 컨테이너 개발 : VM과 유사, 격리 속성을 완화하여 애플리케이션 간에 운영체제(OS)를 공유 
- 컨테이너의 장점
  - 기민한 애플리케이션 생성과 배포 - VM 이미지를 사용하는 것에 비해 컨테이너 이미지 생성이 보다 쉽고 효율적임
  - 지속적인 개발, 통합 및 배포 - 안정적이고 주기적으로 컨테이너 이미지를 빌드해서 배포할 수 있고 (이미지의 불변성 덕에) 빠르고 쉽게 롤백할 수 있음 
  - 개발과 운영의 관심사 분리 - 배포 시점이 아닌 빌드/릴리스 시점에 애플리케이션 컨테이너 이미지를 만들기 때문에, 애플리케이션이 인프라스트럭처에서 디커플 됨 
  - 가시성은 OS 수준의 정보와 메트릭에 머무르지 않고, 애플리케이션의 헬스와 그 밖의 시그널을 볼 수 있음
  - 개발, 테스트 및 운영 환경에 걸친 일관성 - 랩탐에서도 클라우드에서와 동일하게 구동됨 
  - 클라우드 및 OS 배포판 간 이식성 
  - 애플리케이션 중심 관리 - 가상 하드웨어의 OS에서 애플리케이션을 구동하는 수준에서 OS의 논리적인 자원을 사용하여 애플리케이션을 구동하는 수준으로 추상화 수준이 높아짐 
  - 느슨하게 커플되고, 분산되고, 유연하며, 자유로운 마이크로서비스 - 애플리케이션은 단일 목적의 머신에서 모놀리식 스택으로 구동되지 않고 보다 작고 독립적인 단위로 쪼개져서 동적으로 배포되고 관리될 수 있음 
  - 자원 격리 - 애플리케이션 성능을 예측할 수 있음
  - 자원 사용량 - 고효율 고집적
- 컨테이너 오케스트레이션
  - 컨테이너 배포 관리는 흔히 컨테이너 오케스트레이션(Container Orchestration)
  - 컨테이너 오케스트레이션의 목적은 여러 컨테이너의 배포 프로세스를 최적화
  - 애플리케이션은 더 이상 하나의 통일체가 아니라 특정 애플리케이션이 설계 의도대로 기능하도록 함께 작동해야 하는 수십 또는 수백 개의 느슨하게 결합되고 컨테이너화된 요소로 구성 
  - Apache Mesos, Google Kubernetes, Docker Swarm 등의 플랫폼들은 각자 컨테이너 관리를 위한 자체적인 특별한 방식을 보유 
- 컨테이너 오케스트레이션 기능
  - 컨테이너형 애플리케이션의 배포
  - 컨테이너 그룹에 대한 로드밸런싱
  - 스케일링/오토스케일링
  - 컨테이너 장애 복구
  - 컨테이너 그룹간 격리/연결
  - 외부로 서비스 노출
  - 서비스 디스커버리
  - 로그 수집 집중화 / 자동화
  - 모니터링 집중화 / 자동화 
- Kubernetes
  - 컨테이너화된 워크로드와 서비스를 관리하기 위한 이식성이 있고, 확장 가능한 오픈소스 플랫폼
  - 디플로이(Deploy), 자동화, 스켈일링(Scaling), 컨테이너화된 애플리케이션의 관리를 위한 오픈소스 시스템
  - 여러 클러스터의 호스트간 애플리케이션 컨테이너의 배치, 스케일링, 운영을 자동화하기 위한 플랫폼을 제공
  - 쿠버네티스는 크고, 빠르게 성장하는 생태계를 가짐
  - 쿠버네티스란 명칭은 키잡이(helmsman)이나 파일럿을 뜻하는 그리스어에서 유래
  - 구글이 2014년에 쿠버네티스 프로젝트를 오픈소스화 함 
- Docker Swarm
  - 여러 개의 Docker 호스트를 함께 클러스터링하여 단일 가상 Docker 호스트를 생성
  - 호스트 OS에 Agent만 설치하면 간단하게 작동하고 설정이 쉬움
  - Docker 명령어와 Compose를 그대로 사용가능 
- Apache Mesos
  - 수만 대의 물리적 시스템으로 확장 할 수 있도록 설계되어 있음
  - Hadoop, MPI, Hypertable, Spark같은 응용프로그램을 동적클러스터 환경에서 리소스 공유와 분리를 통해 자원 최적화가 가능
  - Docker 컨테이너를 적극적으로 지원함 
