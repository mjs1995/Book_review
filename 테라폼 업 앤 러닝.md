# 서평 
- 이 책은 코드를 관리하는 모든 사람을 위한 것으로 시스템 관리자, 운영 엔지니어, 릴리스 엔지니어, 사이트 안전성 엔지니어, 데브옵스 엔지니어, 인프라 개발자, 풀스택 개발자, 엔지니어링 관리자 및 CTO가 포함됩니다.
- 이 책의 목표는 왜 테라폼을 사용하려 하는지, 워크플로에 어떻게 적용할 것인지, 그리고 어떤 모범 사례가 가장 잘 작동하는지에 대해 논의함으로써 테라폼을 제대로 운영할 수 있도록 하는 것입니다.

# 왜 테라폼인가?
- 테라폼은 해시코프사에서 만든 오픈 소스 도구. 테라폼은 간단한 선언적 언어를 사용하여 인프라를 코드로 정의함.(IaC) 몇 가지 명령을 사용하여 아마존 웹 서비스, 마이크로소프트 애저, 구글 클라우드 플랫폼, 디지털오션 같은 다양한 퍼블릭 클라우드 공급자와 오픈스택, VM웨어 같은 프라이빗 클라우드와 가상화 플랫폼에서 해당 인프라를 배포 및 관리하게 함
- 데브옵스의 등장
  - 수많은 운영팀들이 하드웨어에 많은 돈과 노력을 투자하는 대신 셰프(Chef), 퍼핏(Puppet), 테라폼(Terraform), 도커(Docker) 같은 도구를 사용하여 소프트웨어 작업에 더 많은 시간을 들이고 있음. 시스템 관리자가 서버를 설치하고 네트워크 케이블 설치 작업을 하는 대신에 코드를 작성하는 것
  - 데브옵스는 소프트웨어를 효율적으로 전달하는 프로세스다.
  - 지속적으로 코드를 통합하고 항상 배포 가능한 상태로 유지함
  - 데브옵스의 4가지 핵심 가치는 문화, 자동화, 측정, 공유로 줄여서 CAMS라 함
- 코드형 인프라란?
  - IaC란 코드를 작성 및 실행하여 인프라를 생성, 배포, 수정, 정리하는 것을 말함
  - 데브옵스의 핵심은 서버, 데이터베이스, 네트워크, 로그 파일, 애플리케이션 구성, 문서, 자동화된 테스트, 배포 프로세스 등 거의 모든 것을 코드로 관리할 수 있다는 것
  - 코드형 인프라 도구의 다섯 가지 범주
    - 애드혹 스크립트
      - 수행할 작업을 단계별로 나누고 배시, 루비, 파이썬 등 선호하는 언어를 사용하여 각 단계를 코드로 정의하고 작성된 스크립트를 서버에서 수동으로 실행하는 것 
    - 구성 관리 도구
      - 셰프, 퍼핏, 앤서블, 솔트스택 등은 모두 구성 관리 도구로써 대상 서버에 소프트웨어를 설치하고 관리하도록 설계되어 있음. 애드혹 스크립트를 사용할 때와 다른 여러 가지 장점이 있음
      - 코딩 규칙
        - 앤서블은 문서화, 파일 레이아웃, 명확하게 이름 붙여진 매개 변수, 시크릿 관리 등을 포함하는 일관되고 예측 가능한 구조를 제공함
      - 멱등성 : 실행 횟수에 관계없이 올바르게 동작하는 코드를 멱등성을 가진 코드
      - 분산형 구조 : 애드혹 스크립트는 단일 로컬 머신에서만 실행되도록 설계됨. 앤서블과 같은 구성 관리 도구는 원격의 수많은 서버를 관리하기 위해 특별히 설계된 것 
    - 서버 템플릿 도구
      - 구성 관리 도구의 대안으로 최근에 도커, 패커(Packer), 베이그런ㄷ트(Vagrant)와 같은 서버 템플릿 도구도 인기가 높아지고 있음.
      - 여러 서버를 시작하고 각각 동일한 코드를 실행하여 서버를 구성하는 기존 방식과 다르게, 서버 템플릿 도구는 운영 체제, 소프트웨어, 파일 및 기타 필요한 모든 내용을 포함하고 있는 스냅숏으로 이미지를 생성함
      - 가상 머신
        - 호스트 시스템 및 다른 가상 머신 이미지와는 완전히 분리되어 개인 컴퓨터, QA 서버, 실제 운영 환경 등 모든 환경에서 정확히 동일한 방식으로 실행됨. 단점은 모든 하드웨어를 가상화하고 다른 VM과도 완전히 분리했기 때문에 VM마다 별도의 CPU, 메모리, 리소스가 할당되는 오버헤드가 발생하는 것
      - 컨테이너
        - 도커, 코어OS의 rkt 또는 크라이오와 같은 컨테이너 엔진을 실행하여 격리된 프로세스, 메모리, 마운트 지점, 네트워킹을 만듬. 호스트 시스템 및 다른 컨테이너와는 격리되어 개인 컴퓨터, QA 서버, 실제 운영 환경 등 모든 환경에서 정확히 동일하게 실행된다는 것이 장점.
        - 단점은 단일 서버에서 실행되는 모든 컨테이너가 해당 서버의 OS 커널과 하드웨어를 공유하므로 VM을 사용하는 것만큼의 격리 및 보안 수준을 달성하기가 훨씬 어려울 수 있다는 것. 커널과 하드웨어가 공유되므로 밀리세컨드 단위로 부팅할 수 있으며, CPU 또는 메모리에 대한 오버헤드가 거의 없음
      - 서버 템플릿 도구들의 목적은 약간씩 다름
        - 패커는 일반적으로 프로덕션 AWS 계정에서 실행하는 AMI 처럼 프로덕션 서버에서 직접 실행하는 이미지를 생성하는 데 사용됨
        - 베이그런트는 일반적으로 macOS나 Windows 랩톱에서 실행되는 버추얼박스 이미지와 같이 개발 컴퓨터에서 실행되는 이미지를 만드는 데 사용됨.
        - 도커는 일반적으로 개별 응용 프로그램의 이미지를 만드는 데 사용됨
    - 오케스트레이션 도구
      - 실제 사용 환경에서 수행할 방법 필요함
        - VM과 컨테이너를 하드웨어에 효율적으로 배포하기
        - 롤링 배포, 블루-그린 배포, 카나리 배포 전략을 사용하여 기존의 VM이나 컨테이너를 효율적으로 업데이트하거나 롤백하기
        - VM과 컨테이너의 상태를 모니터링하고 비정상적인 부분을 자동으로 대체하기(자동 복구)
        - 발생하는 트래픽에 따라 VM과 컨테이너의 수를 늘리거나 줄이기(자동 확장)
        - VM과 컨테이너의 트래픽을 분산하기(로드 밸런싱)
        - 서로 다른 네트워크에 있더라도 VM과 컨테이너가 서로 식별하고 통신할 수 있게 하기(서비스 검색)
      - 위 작업 들을 처리하기 위해 쿠버네티스, 마라톤/메소스, 아마존 엘라스틱 컨테이너 서비스, 도커 스웜, 그리고 노마드 같은 오케스트레이션 도구가 필요함 
    - 프로비전 도구
