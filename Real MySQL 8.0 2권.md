# 서평
# 쿼리 작성및 최적화
- MySQL 예약어
  - 테이블을 생성할 때는 항상 역따옴표(`)로 테이블이나 칼럼의 이름을 둘러싸지 않은 상태로 생성하길 권장함, 예약어인지 아닌지 MySQL 서버가 에러로 알려주기 때문
- 리터럴 표기법 문자열
  - SQL 표준에서 문자열은 항상 홑따옴표(')를 사용해서 표시함 
  - REGEXP 연산자
    - ^ : 문자열의 시작을 표시. 정규 표현식은 그 표현식에 일치하는 부분이 문자열의 시작이나 중간 또는 끝부분 어디에 나타나든 상관없지만 "^"심범을 표현식의 앞쪽에 넣어주면 일치하는 부분이 반드시 문자열의 제일 앞쪽에 있어야 함을 의미
    - $ : 문자열의 끝을 표시. "^"와는 반대로 표현식의 끝부분에 "$"를 넣어주면 일치하는 부분이 반드시 문자열의 제일 끝에 있어야 함을 의미함 
    - [] : 문자 그룹을 표시. [xyz] 또는 [x-z]라고 표현하면 'x','y','z' 문자 중 하나인지 확인한느 것, 대괄호는 문자열이 아니라 문자 하나와 일치하는지 확인하는 것 
    - () : 문자열 그룹을 표시, (xyz)라고 표현하면 세 문자 중 한 문자가 있는지 체크하는 것이 아니라 반드시 xyz가 모두 있는지 확인하는 것 
    - |: "|"로 연결된 문자열 중 하나인지 확인함. "abc|xyz"라고 표현하면 "abc"이거나 "xyz"인지 확인하는 것
    - .: 어떠한 문자든지 1개의 문자를 표시하며, 정규 표현식으로 "..."이라고 표현했다면 3개의 문자(실제 문자의 값과 관계없이)로 구성된 문자열을 찾는 것 
    - *: 이 기호 앞에 표시된 정규 표현식이 0 또는 1번 이상 반복될 수 있다는 표시
    - +: 이 기호 앞에 표시된 정규 표현식이 1번 이상 반복될 수 있다는 표시
    - ?: 이 기호 앞에 표시된 정규 표현식이 0 또는 1번만 올 수 있다는 표시 
- MySQL 내장 함수
  - 현재 시간 조회(NOW, SYSDATE)
    - 하나의 SQL에서 모든 NOW() 함수는 같은 값을 가지지만 SYSDATE() 함수는 하나의 SQL 내에서도 호출되는 시점에 따라 결괏값이 달라짐
    - SYSDATE() 함수는 두 가지 큰 잠재적인 문제 존재
      - 첫 번째로는 SYSDATE() 함수가 사용된 SQL 레플리카 서버에서 안정적으로 복제되지 못함
      - 두 번째로는 SYSDATE() 함수와 비교되는 칼럼은 인덱스를 효율적으로 사용하지 못함
  - 타임스탬프 연산(UNIX_TIMESTAMP, FROM_UNIXTIME)
    - UNIX_TIMESTAMP() 함수는 '1970-01-01 00:00:00'으로부터 경과된 초의 수를 반환하는 함수 
  - 문자열 처리
    - RPAD(), LAPD() 함수는 문자열의 좌측 또는 우측에 문자를 덧붙여서 지정된 길이의 문자열로 만드는 함수
    - RTRIM() 함수와 LTRIM() 함수는 문자열의 우측 또는 좌측에 연속된 공백 문자(Space, NewLine, Tab문자)를 제거하는 함수 
  - GROUP BY 문자열 결합
    - GROUP_CONCAT() 함수는 값들을 먼저 정렬한 후 연결하거나 각 값의 구분자 설정도 가능하며, 여러 값 중에서 중복을 제거하고 연결하는 것도 가능하므로 상당히 유용하게 사용됨
  - 암호화 및 해시 함수(MD5, SHA, SHA2)
    - MD5와 SHA 모두 비대칭형 암호화 알고리즘인데, 인자로 전달된 문자열을 각각 지정된 비트 수의 해시 값을 만들어내는 함수
    - SHA() 함수는 SHA-1 암호화 알고리즘을 사용하며, 결과로 160비트(20바이트) 해시 값을 반환함 
    - SHA2() 함수는 SHA 암호화 알고리즘보다 더 강력한 224비트부터 512비트 암호화 알고리즘을 사용해 생성된 해시 값을 반환함
    - MD5() 함수는 메시지 다이제스트(Message Digest) 알고리즘을 사용해 128비트(16바이트) 해시 값을 반환함
  - 벤치마크(BENCHMARK)
    - BENCHMARK() 함수는 SLEEP() 함수와 같이 디버깅이나 간단한 함수의 성능 테스트용으로 아주 유용한 함수
    - 지정한 횟수만큼 반복 실행하는데 얼마나 시간이 소요됐는지가 중요할뿐
    - SELECT BENCHMARK(10, expr)로 실행하는 경우에는 벤치마크 횟수에 관계없이 단 1번의 네트워크, 쿼리 파싱 및 최적화 비용이 소요된다는 점을 고려해야함
  - IP 주소 변환(INET_ATON, INET_NTOA)
     - INET_ATON() 함수와 INET_NTOA() 함수를 이용해 IPv4 주소를 문자열이 아닌 부호 없는 정수 타입에 저장할 수 있게 제공함
     - INET_ATON() 함수는 문자열로 구성된 IPv4 주소를 정수형으로 반환하는 함수, INET_NTOA() 함수는 정수형의 IPv4 주소를 사람이 읽을 수 있는 형태의 '.'으로 구분된 문자열로 반환하는 함수 
  - JSON 필드 크기(JSON_STORAGE_SIZE)
    - JSON 데이터는 텍스트 기반이지만 MySQL 서버는 디스크의 저장 공간을 절약하기 위해 JSON 데이터를 실제 디스크에 저장할 때 BSON(Binary JSON) 포맷을 사용함
