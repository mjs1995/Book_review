# 서평
- 이 책은 표면적으로는 데이터를 정제하고 이해하는 방법에 관한 메뉴얼처럼 보일 수 있음. 그러나 여기서 더 나아가, 보다 안정적인 데이터 시스템을 구축하고 그 과정에 조직 및 이해관계자와 데이터 신뢰를 구축하는 모범 사례 ,기술 및 프로세스에 대해서도 설명함
- 필자는 지금까지 수행한 수많은 인터뷰에서 얻은 지식과 모범 사례를 바탕으로 이 책을 집필했음. 이 책을 통해, 데이터 수집부터 분석에 이르는 파이프라인의 각 단계에서 데이터 다운타임을 방지하기 위해 데이터 품질을 유지,관리하는 방법을 제시하고자 함.

# 지금, 데이터 품질에 주목해야 하는 이유 
- 데이터 다운타임은 데이터가 수집되지 않아 누락되거나 부정확하게 측정되는 등의 데이터 손실로 인해 소프트웨어 또는 서비스의 가동이 중지되는 상황을 의미함
  - 데이터 다운타임이란 데이터가 누락됐거나, 부정확하거나,데이터에 오류가 있어 생기는 문제를 말함
- (상대적으로 예측 가능하지만) 중요한 테이블의 5,000개 행이 맥락도 없이 갑자기 500개 행으로 바뀌는 상황
- 대시보드가 손상되어 실행 대시보드에 NULL 값이 출력되는 상황
- 숨겨진 스키마 변경으로 인해 다운스트림 파이프라인이 중단되는 상황
- 이 책은 신뢰할 수 없는 데이터로 고통받고, 내적 비명을 지르며 이 상황을 개선하기 위해 무언가를 하고 싶어 하는 모든 사람들을 위해 출간되었음. 이들은 데이터 엔지니어, 데이터 분석 또는 데이터 과학 분야 출신으로서, 회사의 데이터 파이프라인을 구축, 확장 및 관리하는 데 적극적으로 참여하는 사람들일 것
- 데이터 품질에 관한 다양한 이슈를 확인할 수 있음
  - 구체적으로는 데이터베이스 스키마(컴퓨터 과학에서 데이터베이스 스키마는 데이터베이스에서 자료의 구조, 자료의 표현 방법, 자료 간의 관계를 형식 언어로 정의한 구조) 변경으로 인한 데이터 파이프라인 중단이나 주요 행 또는 열 중복 현상, 대시보드 내 오류값 발생(대시보드는 자동으로 업데이트되는데, 대시보드에 값을 노출하기 위해 필요한 데이터가 수집되지 못한 경우 혹은 포맷에 맞지 않는 데이터가 입력된 경우 등을 일컫음) 등 다양한 문제를 찾아냄
- 프로덕션 데이터는 소스 시스템의 데이터. 프로덕션 데이터는 고객관리 시스템이나 콘텐츠 관련 프로그램과 같은 데이터 소스로부터 수집되어 데이터 레이크 등의 저장 공간에 쌓인 데이터를 말함 
- 다운타임은 가동 중지 시간(소프트웨어 또는 서비스가 사용 가능, 작동, 사용 불가능, 다운되는 빈도)을 의미하며, 그 외 정상적으로 수행되는 시간을 업타임이라고 함 
- 데이터 품질이란?
  - 측정하지 않으면 관리할 수 없고, 관리할 수 없으면 개선할 수도 없다.라는 말처럼 고품질 데이터는 강력한 분석 프로그램을 만드는 필요조건이 된다.
- 데이터 품질의 현재
  - 시스템 개발 라이프사이클을 단축하는 데브옵스를 통해 업계를 선도하는 모범사례를 만들었음. 해당 사례에는 사이트 신뢰성 엔지니어링, 지속적인 통합, 지속적인 배포 및 마이크로서비스에 기반한 아키텍처 등이 포함됨. 요컨대 데브옵스의 목표는 개발과 운영의 원활한 소통과 효율화로 보다 안정적이고 탁월한 성능의 소프트웨어를 출시하는 것
  - 데이터옵스는 데이터 관리의 자동화를 통해 데이터의 안정성과 성능을 개선하고, 데이터 사일로(각 조직 단위 또는 목적별로 IT 인프라르 도입 및 구축해 사용함으로써 부서, 사업, 솔루션별로 데이터가 고립되어 전사 관점의 의사 결정을 막는 현상을 말함)를 줄이며 데이터 분석 속도를 높이고 오류를 감소시키는 프로세스를 말함 
  - 데이터 다운타임 증가
    - 데이터 분석의 확산과 교차 기능 조직(교차 기능 조직은 서로 다른 부서에서 공통의 목표를 위해 구성된 조직을 의미함. 현업 부서에 데이터 분석가나 데이터 과학자가 포함되거나 데이터 조직 내에 엔지니어와 현업을 이해하고 있는 구성원이 참여하는 사례가 확대되고 있음)의 등장으로 클라우드 서비스가 선호되기 시작했음. 클라우드를 활용한 아마존 레드시프트나 스노우플레이크, 구글 빅쿼리와 같은 솔루션을 통해 사용자가 더 쉽고 빠르게 데이터를 처리할 수 있게 되면서 클라우드는 더 큰 인기를 끌게 되었음 
    - 데이터 파이프라인의 복잡성 증가
      - 데이터 소스의 증가, 이종 데이터 간 결합, 경영진의 데이터 사용 증가 등으로 인해 처리과정이 늘어나고 데이터 간 사소하지 않은 종속성(서비스가 점점 더 고도화되면서 특정 행위에서 생성된 데이터가 다른 데이터에도 영향을 주는 종속관계가 넓어지고 깊어짐)이 커지는 등 데이터 파이프라인은 점점 더 복잡해지고 있음
    - 데이터 조직의 전문성 강화 
      - 데이터 분석가는 회사 내 담당자들이 풍부하고 실현 가능한 비즈니스 인사이트를 얻을 수 있도록 데이터셋을 수집,정제하며 모델링과 분석을 담당함. 
      - 데이터 엔지니어는 요구하는 성능을 빠르고 안정적으로 충족할 수 있도록 분석 기술과 시스템을 구축하고 관리함
      - 데이터 과학자는 분석 및 엔지니어링과 더불어 수학 및 통계학, 컴퓨팅 기법을 활용하여 보다 고도화된 능력을 발휘해야 하는 역할을 담당함 
      - 실제로 대기업에선 데이터 거버넌스 리더, 데이터 스튜어드(현업 부서에서 비즈니스 관점으로 데이터의 생성부터 활용까지 프로세스를 총괄하는 역할을 의미함), 운영 분석가와 같은 역할도 생겨나고 있음. 대규모로 데이터 조직을 꾸릴 자원이 부족할 경우 분석-엔지니어와 같은 하이브리드 직무가 활용되기도 함 
    - 분산된 데이터 조직
      - 분산된 데이터 아키텍처란 무엇일까? 중앙의 플랫폼 조직에서는 데이터를 관리하고, 비즈니스 전반의 데이터 분석 기능이나 데이터 과학자들은 분산시키는 구조를 말함
      - 분산 도메인 지향 데이터 아키텍처인 데이터 메시와는 다른 개념
  - 데이터 산업 동향 
    - 데이터 메시
      - 데이터 메시는 마이크로서비스 아키텍처의 데이터 플랫폼 버전으로 볼 수 있음 
      - 데이터 메시는 일종의 사회 기술적 시스템 패러다임(기술 영역의 사회 체계를 일컫음. 복잡해지는 인간 세상에서 정치,사회 체계가 고도화된 것처럼 한 번에 파악하기 어려울 정도로 수많은 서비스를 수행하는 기업의 기술 기반 사회 체계의 발달을 의미함)으로, 사용자가 복잡해지는 아키텍처 및 솔루션과 상호작용할 수 있도록 함
      - 데이터 메시는 도메인 지향 분산형 아키텍처로 셀프 서비스 설계를 활용하여 도메인별로 데이터가 편재성(도메인별로 데이터가 퍼져 있는 현상을 말함)을 갖도록 함. 여기에는 에릭 에반스의 도메인 주도 설계 이론을 활용함
        - 해당 이론은 유연하고 확장성 높은 소프트웨어 개발 접근법을 포함하여, 코드의 구조와 사용된 언어와 비즈니스 도메인은 상응함 
      - 단일 중앙 집중형 데이터 레이크에서 소비,저장,변환,출력을 처리하는 기존 모놀리식 데이터 인프라와 달리, 데이터 메시는 자체 파이프라인을 통해 프로덕트형 데이터(data-as-a-product) 관점에서 분산된 도메인별로 데이터 소비자가 활용할 수 있도록 처리하고 지원함 
      - 범용적 상호운용성 레이어를 통해 데이터에 동일한 표준을 적용하고, 개별 도메인과 데이터가 연결될 수 있도록 함 
      - 데이터 메시는 데이터를 프로덕트로 제공할 책임이 있는 도메인 이해관계자들이 데이터 소유권을 공유할 수 있게 하는 동시에, 도메인 내외의 분산된 데이터 간의 커뮤니케이션을 원활하게 함
      - 데이터 인프라는 각 도메인에 데이터 처리에 필요한 솔루션을 제공하는 역할을 함. 반면 도메인은 데이터 수집,정제,집계를 관리하며, 해당 데이터는 비즈니스 인텔리전스 애플리케이션에 사용될 수 있는 자산이 됨. 
      - 각 도메인은 각각의 파이프라인을 소유할 책임이 있는데, 원시 데이터를 저장하고 카탈로그화하며 유지 관리하고 접근 권한을 관리하는 것은 모든 도메인이 보유한 일련의 기능. 
      - 특정 도메인에 데이터가 제공되어 데이터가 변환되면 도메인 소유자는 분석이든, 운영이든 필요에 따라 데이터를 활용할 수 있음 
      - 자마크 데가니가 정리한 데이터 메시는 신뢰할 수 있는 고품질 데이터와 범용적인 거버넌스에 의존한 도메인 지향 분산 데이터 아키텍처로 이루어져 있음 
      - 데이터 메시 패러다임은 데이터를 신뢰할 수 있으며, 범용적 상호운용성이 도메인 간에 적용될 때에만 성공적일 수 있음. 데이터를 신뢰할 수 있는 유일한 방법은 테스트하고 모니터링하는 것 
    - 데이터 레이크하우스의 등장
      - 구조화된 데이터 저장소인 데이터 웨어하우스와 보다 자유도가 높은 데이터 레이크 모두 고품질 데이터가 필요함. 점점 더 많은 데이터 조직이 증가하는 비즈니스 요구 사항을 소화하기 위해 데이터 웨어하우스와 데이터 레이크를 둘 다 사용하고 있음. 이것은 데이터 레이크하우스가 부각되는 이유 
      - 데이터 레이크하우스라는 개념은 클라우드 플랫폼 분야에서 아마존의 레드시프트 스펙트럼이나 데이터브릭스의 레이크하우스와 같은 기능이 추가되면서 처음 등장 했음. 당시 데이터 레이크에도 SQL 질의 및 스키마와 같은 데이터 웨어하우스의 기능이 추가되는 추세였음. 사실상 오늘날에는 웨어하우스와 레이크의 기능적 차이가 줄어들고 있으며, 두 형태의 장점을 결합한 데이터 레이크하우스가 확산되고 있음 
      - 레이크하우스로 마이그레이션한다는 것은 데이터 파이프라인이 점점 더 복잡해지고 있음을 시사함

# 신뢰할 수 있는 데이터 시스템 구축을 위한 블록 조립
- 운영 데이터와 분석 데이터의 차이
  - 운영 데이터
    - 운영상 생성된 데이터, 즉 조직에서 일상적인 운영을 통해 생성된 데이터. 특정 시점의 인벤토리 스냅샷, 고객 인상 및 거래 기록은 모두 운영 데이터의 예
  - 분석 데이터
    - 분석적으로 사용되는 데이터, 즉 데이터 기반 의사 결정에 활용되는 데이터를 말함. 마케팅 전환율, 클릭률, 글로벌 지역별 광고 노출 등이 분석 데이터의 예
    - 운영 데이터는 시스템 및 프로세스의 신속한 업데이트르 위해 실제 비즈니슨 프로세스의 데이터를 기록하는 반면 분석 데이터는 좀 더 강력하고 효율적인 분석을 하는 데 사용됨
    - 운영 데이터로 비즈니스를 운영하고 분석 데이터로 비즈니스를 관리함. 분석 데이터가 운영 데이터와 다른 방식으로 비즈니스 인텔리전스를 주도한다는 점을 고려할 때, 이 데이터가 조직의 성공에 더 중요하거나 중심적이라고 생각할 수 있음. 
    - 분석 데이터는 변환, 집계된 운영 데이터에 의존하기 때문에 항상 그런 것만은 아님 
- 차이는 어떻게 만들어 지는가?
  - 운영 데이터는 데이터 파이프라인의 분석 데이터에서 거의 대부분 업스트림으로 나타남. 이는 분석 데이터가 운영 데이터 스토어의 집계 또는 확장을 포함하는 경우가 많기 때문
  - 운영 데이터와 분석 데이터의 차이가 중요한 이유 중 하나는 처리량과 대기 시간의 균형 때문임. 처리량-대기 시간 제약은 고정된 처리 능력을 가진 모든 시스템에 영향을 미침. 일반적으로 처리량은 일정 단위 시간 내에 처리되는 데이터의 양을 의미하며, 대기 시간은 데이터 처리가 끝날 때까지의 지연을 의미함 
- 데이터 웨어하우스 vs 데이터 레이크
  - 데이터 웨어하우스는 데이터를 구조화된(행-열) 형식으로 저장함. 해당 데이터는 고도로 변환(정의된 전처리 절차의 결과)되며 이처럼 변환된 데이터는 적어도 이론적으로 확실한 존재 이유가 있음 
  - 데이터 웨어하우스: 스키마 수준의 테이블 타입
    - 데이터 웨어하우스에는 쓰기 스키마 액세스 권한이 필요함. 데이터 웨어하우에 데이터가 들어오는 즉시 데이터의 구조를 설정한다는 의미. 데이터의 추가 변환에 따라 모든 단계에서 명시적으로 새로운 구조를 만들어야 함 
    - 데이터 웨어하우스는 완벽하게 통합되고 관리되는 솔루션이므로, 즉시 구축하고 운영할 수 있음. 데이터 웨어하우스는 데이터 레이크와 달리 일반적으로 더 많은 구조와 스키마가 필요하므로 데이터 위생(data hygiene, 데이터가 정확하고 일관되며, 오류가 없는지 확인하는 데 사용되는 관행이나 프로세스(누락 값 채우기, 중복 레코드 식별 및 제거 등)를 말함)이 개선됨. 데이터를 읽고 사용할 때 복잡성이 줄어듬 
    - 현대의 데이터 웨어하우스는 쓰기 스키마와 아키텍처, 루커 및 태블로와 같은 비즈니스 인텔리전스 도구를 통합하여 이 방법론을 실현함. 데이터 웨어하우스의 데이터에는 존재 이유가 있고, 그 이유는 비즈니스 목표와 일치해야 함 
      - 아마존 레드시프트
        - 최초의 클라우드 데이터 웨어하우스이자 그만큼 자주 사용되는 아마존 레드시프트는 AWS를 기반으로 하며, 소스 커넥터를 활용해 원시 데이터 소스의 데이터를 관계형 스토리지로 파이프라인을 통해 전달함.
        - 레드시프트의 열 기반 저장 구조와 병렬 처리는 분석 작업의 부하를 줄여줌
      - 구글 빅쿼리
        - 레드시프트와 마찬가지로, 자사의 독점 클라우드 플랫폼인 GCP를 활용하고 열 기반 저장 구조를 사용하며, 빠른 쿼리를 위해 병렬 처리를 활용함
        - 빅쿼리는 레드시프트와 비교했을 때 사용 패턴에 따라 확장되는 서버리스(serverless) 솔루션으로 더 잘 사용할 수 있음 
      - 스노우플레이크
        - 운영을 위해 클라우드에 의존하는 레드시프트 또는 GCP와 달리, 스노우플레이크의 클라우드 데이터 웨어하우징 기능은 AWS, 구글, 애저 및 기타 퍼블릭 클라우드의 인프라를 기반으로 함 
        - 스노우플레이크에서는 사용자가 컴퓨팅 및 스토리지 비용을 별도로 지불할 수 있으므로 좀 더 유연한 비용 구조를 원하는 팀에게 데이터 웨어하우스를 제공할 수 있음
    - 데이터 품질 관리와 관련해 염두에 두어야 할 몇가지 약점
      - 제한된 유연성
        - 데이터 웨어하우스는 가장 유연한 데이터 스토리지 솔루션은 아님. 상대적으로 확장성이 낮다는 말이 아님
        - 웨어하우스의 형식으로 제한되어 있음을 말함. 데이터 웨어하우스에 대한 항목은 명확한 스키마가 있는 표 형식으로 강제 지정되어야 함. 
        - JSON과 같은 반구조화된 데이터와 그 쿼리는 대개 적합하지 못하고, 나쁜 데이터의 경우 강제 변환되지 않으면 쉽게 소실되기도 함 
      - SQL 전용 지원
        - 데이터 웨어하우스에 요청할 때는 SQL과 같은 쿼리 언어를 사용해야 함. 파이썬과 같은 명령형 언어는 강력한 라이브러리 생태계를 보유하므로, 머신러닝에 유용한 데이터 조작 처리를 지원하지 않음 
        - 머신러닝을 구현할 때 추가 프로세싱을 하려면 SQL을 활용해 데이터를 데이터 웨어하우스 밖으로 이동시켜야 함. 데이터 이동은 종종 데이터를 망가뜨리고 데이터의 볼륨과 신선도에 부정적인 영향을 미치며 스키마 이상(anomaly) 현상의 원인이 되기도 함
      - 워크플로에서의 마찰(Frictional workflows)
        - 프로덕트의 이터레이션(개발이 진행되는 기간을 말함.이때 일부 기능을 배포함으로써 고객 및 이해관계자들은 프로덕트르 빠르게 사용하고 피드백을 줄 수 있음. 기간은 프로젝트마다 다른데, 일반적으로 1주일에서 4주일 사이)이 반복됨에 따라 긴말하게 협업하는 소규모의 데이터 과학자 팀은 쓰기 스키마 시스템이 제공하는 명확함이 유익하기보다는 번거롭다고 느낄 것
        - 신속하게 작업하고자 할 때는 데이터 구조에 대한 기준이 느슨해지는 것이 좋음. 하지만 이러한 구조는 지속적으로 변화할 것이고, 데이터 웨어하우스는 지속적인 스키마 변경을 달가워하지 않음 
  - 데이터 레이크: 파일 수준의 조작
    - 데이터 웨어하우스와 달리, 데이터 레이크 아키텍처를 사용하면 읽기 스키마에 접근할 수 있음. 즉, 데이터를 사용할 준비가 되었을 때 데이터 구조를 추론함
    - 데이터 레이크는 데이터 웨어하우스의 DIY 버전으로, 팀 시스템 요구 사항에 따라 다양한 메타데이터, 저장소, 컴퓨팅 기술을 선택할 수 있음.
    - 데이터 레이크는 다수의 데이터 엔지니어가 운영하는 맞춤형 플랫폼을 구축하려는 데이터 조직에 이상적
    - 구축기의 데이터 레이크는 주로 아파치 하둡 맵리듀스와 HDFS를 기반으로 구축, SQL 엔진으로 데이터를 쿼리하기 위해 아파티 하이브를 활용. 아파치 스파크는 데이터 레이크를 훨씬 더 쉽게 유지할 수 있도록 만들었고, 데이터 레이크의 대규모 데이터셋에 걸쳐 분산된 계싼을 위한 일반화된 프레임워크를 제공했음 
    - 데이터 레이크의 일반적인 특징
      - 분산된 저장소 및 컴퓨팅 : 비용 절감에 상당히 도움. 실시간 스트리밍 및 쿼리 데이터를 풍부하게 만들며, 해당 데이터 구문 분석을 용이하게 함 
      - 분산 컴퓨팅 지원 
      - 사용자 지정 및 상호운용성
